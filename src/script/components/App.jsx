import React, {Component} from 'react'
import linkState from 'react-link-state'
import Autocomplete from './autocomplete/Autocomplete.jsx'
import AutocompleteItem from './autocomplete/AutocompleteItem.jsx'

export default class App extends Component{
  constructor(props){
    super(props)
    this.state = {
      auto: ''
    }
  }
  fetch(search){
    return new Promise(
      resolve => setTimeout(() => resolve([
        {id:0,name:"Afghanistan"},{id:1,name:"Åland Islands"},{id:2,name:"Albania"},{id:3,name:"Algeria"},{id:4,name:"American Samoa"},{id:5,name:"Andorra"},{id:6,name:"Angola"},{id:7,name:"Anguilla"},{id:8,name:"Antarctica"},{id:9,name:"Antigua & Barbuda"},{id:10,name:"Argentina"},{id:11,name:"Armenia"},{id:12,name:"Aruba"},{id:13,name:"Ascension Island"},{id:14,name:"Australia"},{id:15,name:"Austria"},{id:16,name:"Azerbaijan"},{id:17,name:"Bahamas"},{id:18,name:"Bahrain"},{id:19,name:"Bangladesh"},{id:20,name:"Barbados"},{id:21,name:"Belarus"},{id:22,name:"Belgium"},{id:23,name:"Belize"},{id:24,name:"Benin"},{id:25,name:"Bermuda"},{id:26,name:"Bhutan"},{id:27,name:"Bolivia"},{id:28,name:"Bosnia & Herzegovina"},{id:29,name:"Botswana"},{id:30,name:"Brazil"},{id:31,name:"British Indian Ocean Territory"},{id:32,name:"British Virgin Islands"},{id:33,name:"Brunei"},{id:34,name:"Bulgaria"},{id:35,name:"Burkina Faso"},{id:36,name:"Burundi"},{id:37,name:"Cambodia"},{id:38,name:"Cameroon"},{id:39,name:"Canada"},{id:40,name:"Canary Islands"},{id:41,name:"Cape Verde"},{id:42,name:"Caribbean Netherlands"},{id:43,name:"Cayman Islands"},{id:44,name:"Central African Republic"},{id:45,name:"Ceuta & Melilla"},{id:46,name:"Chad"},{id:47,name:"Chile"},{id:48,name:"China"},{id:49,name:"Christmas Island"},{id:50,name:"Cocos (Keeling) Islands"},{id:51,name:"Colombia"},{id:52,name:"Comoros"},{id:53,name:"Congo - Brazzaville"},{id:54,name:"Congo - Kinshasa"},{id:55,name:"Cook Islands"},{id:56,name:"Costa Rica"},{id:57,name:"Côte d’Ivoire"},{id:58,name:"Croatia"},{id:59,name:"Cuba"},{id:60,name:"Curaçao"},{id:61,name:"Cyprus"},{id:62,name:"Czech Republic"},{id:63,name:"Denmark"},{id:64,name:"Diego Garcia"},{id:65,name:"Djibouti"},{id:66,name:"Dominica"},{id:67,name:"Dominican Republic"},{id:68,name:"Ecuador"},{id:69,name:"Egypt"},{id:70,name:"El Salvador"},{id:71,name:"Equatorial Guinea"},{id:72,name:"Eritrea"},{id:73,name:"Estonia"},{id:74,name:"Ethiopia"},{id:75,name:"Falkland Islands"},{id:76,name:"Faroe Islands"},{id:77,name:"Fiji"},{id:78,name:"Finland"},{id:79,name:"France"},{id:80,name:"French Guiana"},{id:81,name:"French Polynesia"},{id:82,name:"French Southern Territories"},{id:83,name:"Gabon"},{id:84,name:"Gambia"},{id:85,name:"Georgia"},{id:86,name:"Germany"},{id:87,name:"Ghana"},{id:88,name:"Gibraltar"},{id:89,name:"Greece"},{id:90,name:"Greenland"},{id:91,name:"Grenada"},{id:92,name:"Guadeloupe"},{id:93,name:"Guam"},{id:94,name:"Guatemala"},{id:95,name:"Guernsey"},{id:96,name:"Guinea"},{id:97,name:"Guinea-Bissau"},{id:98,name:"Guyana"},{id:99,name:"Haiti"},{id:100,name:"Honduras"},{id:101,name:"Hong Kong SAR China"},{id:102,name:"Hungary"},{id:103,name:"Iceland"},{id:104,name:"India"},{id:105,name:"Indonesia"},{id:106,name:"Iran"},{id:107,name:"Iraq"},{id:108,name:"Ireland"},{id:109,name:"Isle of Man"},{id:110,name:"Israel"},{id:111,name:"Italy"},{id:112,name:"Jamaica"},{id:113,name:"Japan"},{id:114,name:"Jersey"},{id:115,name:"Jordan"},{id:116,name:"Kazakhstan"},{id:117,name:"Kenya"},{id:118,name:"Kiribati"},{id:119,name:"Kosovo"},{id:120,name:"Kuwait"},{id:121,name:"Kyrgyzstan"},{id:122,name:"Laos"},{id:123,name:"Latvia"},{id:124,name:"Lebanon"},{id:125,name:"Lesotho"},{id:126,name:"Liberia"},{id:127,name:"Libya"},{id:128,name:"Liechtenstein"},{id:129,name:"Lithuania"},{id:130,name:"Luxembourg"},{id:131,name:"Macau SAR China"},{id:132,name:"Macedonia"},{id:133,name:"Madagascar"},{id:134,name:"Malawi"},{id:135,name:"Malaysia"},{id:136,name:"Maldives"},{id:137,name:"Mali"},{id:138,name:"Malta"},{id:139,name:"Marshall Islands"},{id:140,name:"Martinique"},{id:141,name:"Mauritania"},{id:142,name:"Mauritius"},{id:143,name:"Mayotte"},{id:144,name:"Mexico"},{id:145,name:"Micronesia"},{id:146,name:"Moldova"},{id:147,name:"Monaco"},{id:148,name:"Mongolia"},{id:149,name:"Montenegro"},{id:150,name:"Montserrat"},{id:151,name:"Morocco"},{id:152,name:"Mozambique"},{id:153,name:"Myanmar (Burma)"},{id:154,name:"Namibia"},{id:155,name:"Nauru"},{id:156,name:"Nepal"},{id:157,name:"Netherlands"},{id:158,name:"New Caledonia"},{id:159,name:"New Zealand"},{id:160,name:"Nicaragua"},{id:161,name:"Niger"},{id:162,name:"Nigeria"},{id:163,name:"Niue"},{id:164,name:"Norfolk Island"},{id:165,name:"North Korea"},{id:166,name:"Northern Mariana Islands"},{id:167,name:"Norway"},{id:168,name:"Oman"},{id:169,name:"Pakistan"},{id:170,name:"Palau"},{id:171,name:"Palestinian Territories"},{id:172,name:"Panama"},{id:173,name:"Papua New Guinea"},{id:174,name:"Paraguay"},{id:175,name:"Peru"},{id:176,name:"Philippines"},{id:177,name:"Pitcairn Islands"},{id:178,name:"Poland"},{id:179,name:"Portugal"},{id:180,name:"Puerto Rico"},{id:181,name:"Qatar"},{id:182,name:"Réunion"},{id:183,name:"Romania"},{id:184,name:"Russia"},{id:185,name:"Rwanda"},{id:186,name:"Samoa"},{id:187,name:"San Marino"},{id:188,name:"São Tomé & Príncipe"},{id:189,name:"Saudi Arabia"},{id:190,name:"Senegal"},{id:191,name:"Serbia"},{id:192,name:"Seychelles"},{id:193,name:"Sierra Leone"},{id:194,name:"Singapore"},{id:195,name:"Sint Maarten"},{id:196,name:"Slovakia"},{id:197,name:"Slovenia"},{id:198,name:"Solomon Islands"},{id:199,name:"Somalia"},{id:200,name:"South Africa"},{id:201,name:"South Georgia & South Sandwich Islands"},{id:202,name:"South Korea"},{id:203,name:"South Sudan"},{id:204,name:"Spain"},{id:205,name:"Sri Lanka"},{id:206,name:"St. Barthélemy"},{id:207,name:"St. Helena"},{id:208,name:"St. Kitts & Nevis"},{id:209,name:"St. Lucia"},{id:210,name:"St. Martin"},{id:211,name:"St. Pierre & Miquelon"},{id:212,name:"St. Vincent & Grenadines"},{id:213,name:"Sudan"},{id:214,name:"Suriname"},{id:215,name:"Svalbard & Jan Mayen"},{id:216,name:"Swaziland"},{id:217,name:"Sweden"},{id:218,name:"Switzerland"},{id:219,name:"Syria"},{id:220,name:"Taiwan"},{id:221,name:"Tajikistan"},{id:222,name:"Tanzania"},{id:223,name:"Thailand"},{id:224,name:"Timor-Leste"},{id:225,name:"Togo"},{id:226,name:"Tokelau"},{id:227,name:"Tonga"},{id:228,name:"Trinidad & Tobago"},{id:229,name:"Tristan da Cunha"},{id:230,name:"Tunisia"},{id:231,name:"Turkey"},{id:232,name:"Turkmenistan"},{id:233,name:"Turks & Caicos Islands"},{id:234,name:"Tuvalu"},{id:235,name:"U.S. Outlying Islands"},{id:236,name:"U.S. Virgin Islands"},{id:237,name:"Uganda"},{id:238,name:"Ukraine"},{id:239,name:"United Arab Emirates"},{id:240,name:"United Kingdom"},{id:241,name:"United States"},{id:242,name:"Uruguay"},{id:243,name:"Uzbekistan"},{id:244,name:"Vanuatu"},{id:245,name:"Vatican City"},{id:246,name:"Venezuela"},{id:247,name:"Vietnam"},{id:248,name:"Wallis & Futuna"},{id:249,name:"Western Sahara"},{id:250,name:"Yemen"},{id:251,name:"Zambia"},{id:252,name:"Zimbabwe"}
      ]), 1000)
    )
  }
  itemRender(item, key){
    return <AutocompleteItem key={key} item={item} currentValue={this.state.auto} />
  }
  render(){
    console.log(this.state);
    return(
      <Autocomplete
        valueLink={linkState(this, 'auto')}
        fetch={this.fetch}
        itemRender={this.itemRender.bind(this)}
      />
    )
  }
}
